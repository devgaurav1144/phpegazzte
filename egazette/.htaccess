<IfModule mod_rewrite.c>

    Options +FollowSymLinks

    RewriteEngine on

    RewriteBase /egazette
	
	 #RewriteCond %{HTTP_HOST} !^www\. [NC]
	 #RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #  RewriteCond %{HTTP:X-Forwarded-Proto} !https
  #  RewriteCond %{HTTPS}% off
	#  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    # Disable HTTP Methods
    
    RewriteCond %{REQUEST_METHOD} ^(TRACKPUT|PUT|DELETE|CONNECT|OPTIONS|HEAD)
    # RewriteCond %{REQUEST_METHOD} ^(GET|HEAD|POST)
    RewriteRule .* - [F]
	
    RewriteCond $1 !^(index\.php|resources|robots\.txt)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L,QSA]
    

</IfModule>
	
	<Files "license.txt">
  Require all denied
</Files>
<Files "package.json">
  Require all denied
</Files>
<Files "composer.json">
  Require all denied
</Files>
<Files "composer.lock">
  Require all denied
</Files>
<Files "readme.rst">
  Require all denied
</Files>
<Files "Gruntfile.js">
  Require all denied
</Files>
<Files ".gitignore">
  Require all denied
</Files>
<Files ".editorconfig">
  Require all denied
</Files>
<Files "contributing.md">
  Require all denied
</Files>
	
# Extra Security Headers

<IfModule mod_headers.c>

  Header set X-XSS-Protection "1; mode=block"
  Header always append X-Frame-Options SAMEORIGIN
  Header set X-Content-Type-Options nosniff
  #Header always edit Set-Cookie (.*) "$1; SameSite=None; Secure"
  Header always edit Set-Cookie (.*) "$1; SameSite=None;"
  # Header set Access-Control-Allow-Origin "https://yourdomainname.in"
  Header set Access-Control-Allow-Origin "http://localhost"
  Header set Access-Control-Allow-Origin "https://cse.google.com/"
  Header set Access-Control-Allow-Origin "https://fonts.googleapis.com/"
  Header set Strict-Transport-Security "max-age=31536000" env=HTTPS
  # Hide server signature
  ServerSignature Off         
  
</IfModule>

# Hide server signature
ServerSignature Off

# Reduce server information
# ServerTokens Prod

# Block directory accesses
Options -Indexes

<FilesMatch "\.(htm|html|css|js|php)$">

#	Header set Content-Security-Policy "default-src 'self'; script-src 'self' 'sha256-8CYAn+NlPbCSvZQnfk5oSPv+MqU2dKrmw+jMTvWtAc4=' 'nonce-a6b9a780936c8e980939086f618dded2' https://www.gstatic.com/ https://fonts.googleapis.com/ https://cse.google.com/ https://www.google.com/ http://platform.twitter.com/widget.js platform.twitter.com syndication.twitter.com cdn.syndication.twimg.com; img-src 'self'; style-src 'self' 'nonce-8f0882ce3be14f201cadd0eff5726cbd'  https://maxcdn.bootstrapcdn.com https://fonts.googleapis.com/ https://www.gstatic.com/ https://fonts.googleapis.com/ https://cse.google.com/ https://www.google.com/; frame-src 'self' https://www.google.com/maps/ http://platform.twitter.com/ https://www.facebook.com/; font-src 'self' data: https://fonts.googleapis.com/ https://maxcdn.bootstrapcdn.com https://fonts.gstatic.com/;frame-ancestors 'none';object-src 'self';"
	
</FilesMatch>

## Enable GZIP Compression ##
<ifModule mod_gzip.c>

    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*

</ifModule>